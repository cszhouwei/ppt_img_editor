# 字号编辑器改进说明

## 问题描述

原有的字号滑块最大值只有 72px，无法满足大字号文本的编辑需求。

## 改进方案

### 1. 扩大范围

将字号范围从 `12-72px` 扩展到 `12-200px`：

```tsx
// 旧版本
<input type="range" min="12" max="72" />

// 新版本
<input type="range" min="12" max="200" />
```

### 2. 增加数字输入框

除了滑块外，新增数字输入框，支持两种编辑方式：

```tsx
<div style={{ display: 'flex', gap: '8px' }}>
  {/* 滑块：适合快速调整 */}
  <input type="range" min="12" max="200" />

  {/* 数字框：适合精确输入 */}
  <input type="number" min="12" max="200" style={{ width: '70px' }} />
</div>
```

## 用户体验改进

### 使用场景对比

| 操作方式 | 适用场景 | 优势 |
|---------|---------|------|
| 滑块拖动 | 快速调整、预览效果 | 直观、实时反馈 |
| 数字输入 | 精确设置特定字号 | 精准、快速跳转 |

### 示例

**场景 1：快速调整**
1. 拖动滑块从 32px → 50px
2. 实时查看文字大小变化
3. 点击"应用更改"

**场景 2：精确设置**
1. 直接在数字框输入 `128`
2. 按回车或失焦
3. 滑块自动同步位置
4. 点击"应用更改"

## 技术实现

### 双向绑定

滑块和数字框共享同一个 state，自动同步：

```tsx
const [fontSize, setFontSize] = useState(32);

// 两个输入框都绑定到同一个 state
<input
  type="range"
  value={fontSize}
  onChange={(e) => setFontSize(Number(e.target.value))}
/>
<input
  type="number"
  value={fontSize}
  onChange={(e) => setFontSize(Number(e.target.value))}
/>
```

### 范围限制

- **最小值**：12px（保证可读性）
- **最大值**：200px（覆盖海报、标题等大字号场景）
- **后端限制**：与后端字号估算算法的最大值 200px 保持一致

## 兼容性

### 向后兼容

- 保留原有的字号范围 12-72px 内的所有功能
- 扩展到 200px 不影响现有数据
- 已有的文本图层字号不受影响

### 数据一致性

后端字号估算算法同样限制在 12-200px：

```python
# services/doc_process/src/utils/text_style.py
font_size = max(12, min(font_size, 200))
```

## 测试建议

1. **小字号测试**：12px, 14px, 16px
2. **常规字号测试**：24px, 32px, 48px
3. **大字号测试**：72px, 100px, 150px, 200px
4. **边界测试**：
   - 输入 11px → 自动调整为 12px
   - 输入 201px → 自动调整为 200px
5. **交互测试**：
   - 滑块调整后，数字框同步
   - 数字框输入后，滑块同步

## 未来优化方向

1. **自适应步长**：
   - 12-48px：步长 1px（精细调整）
   - 48-100px：步长 2px（中等调整）
   - 100-200px：步长 5px（快速调整）

2. **预设快捷按钮**：
   ```tsx
   <div className="font-size-presets">
     <button onClick={() => setFontSize(14)}>小</button>
     <button onClick={() => setFontSize(24)}>中</button>
     <button onClick={() => setFontSize(48)}>大</button>
     <button onClick={() => setFontSize(96)}>特大</button>
   </div>
   ```

3. **单位切换**：
   - px（像素，默认）
   - pt（点，印刷单位）
   - em（相对单位）

4. **实时预览**：
   - 拖动滑块时实时更新画布
   - 无需点击"应用更改"
